<div class="container mt-4 px-4 mb-4"
  data-controller="mapbox"
  data-mapbox-markers-value="<%= @markers.to_json %>"
  data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  <div class="text-center mb-2">
    <%= link_to 'All locations', locations_path, class:"btn btn-flat"  %>
    <%= link_to 'home', root_path, class:"btn btn-flat"  %>
  </div>
  <div style="width: 100%; height: 600px;"
    data-mapbox-target="map">
  </div>
  <% if @location.user == current_user %>
    <%= link_to 'Edit your location', edit_location_path(@location)  %>
  <% end %>

  <div class="card-no-hover p-4 mt-4"
  data-mapbox-target="location"
  data-location-id="<%= @location.id %>">
    <h1 class="text-shelter"><%= @location.location_type %></h1>
    <h1 class="card-text-title text-primary"><%= @location.name %></h1>
    <div class="contri-card contributions p-3">
      <p class="mint-green-text">SUPPLIES AVAILABLE</p>
      <% @location_contributions.each do |contribution| %>
        <div class="contri-card-mint mt-2 p-2">
          <div class="d-flex flex-row">
            <small><strong><%= contribution.quantity ? contribution.quantity : 'Unknown' %></strong></small>
            &nbsp
            <small><strong><%= contribution.supply_type %></strong></small>
          </div>
          <p><%= contribution.description %></p>
        </div>
      <% end %>
    </div>
    <div class="text-center mt-2">
      <%= link_to 'Add a contribution', new_location_contribution_path(@location), class:"btn btn-flat"  %>
    </div>
  </div>
  <div class="card-no-hover mt-4 p-4 mb-4">
    <div class="comments">
      <div class="messages">
        <% @comments.each do |comment| %>
          <small><%= comment.created_at %></small>
          <p id="comment-<%= comment.id %>"><i class="fas fa-angle-right"></i> <%= comment.content %></p>
        <% end %>
      </div>
      <div>
        <% if user_signed_in? %>
          <%= simple_form_for([@location, @comment], remote: true) do |f| %>
            <%= f.input :content, input_html: {class:"comment-box"}  %>
            <div class="text-center">
              <%= f.button :submit, "Add Comment", class:"btn btn-flat" %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>
